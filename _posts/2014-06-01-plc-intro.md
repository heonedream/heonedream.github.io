---
layout: blog
title: PLC 概述
tags: PLC SFC 接口 全局变量
---

IEC 61131-3 规定了可编程控制器编程语言的 *语法* 和 *语义* 。这一套统一的编程语言分如下两类：

1. 两种文本语言。 *IL (Instruction List)* 和 *ST (Structured Text)*
2. 两种图形语言。 *LD (Ladder Diagram)* 和 *FBD (Function Block Diagram)*

> *顺序功能图(SFC)元素* 用来结构化描述可编程控制器程序和功能块的内部组织。
> *配置元素* 用来支持将可编程控制器程序安装到可编程控制器系统中。

*符合* IEC 61131-3 的可编程控制器程序应满足如下要求：

1. 对于特定的语言，只使用该标准规定的特性。
2. 不使用语言的扩展特性。
3. 不依赖于对 **实现相关** 的任何特别解释。

<!--more-->

## 定义

**聚集** ：数据对象结构化的收集所形成的数据类型。

**赋值** ：给定变量或 *聚集* 值的机制。

**数据类型** ：取值的集合以及允许的操作集合。

**声明** ：建立 *语言元素* 定义的机制。

**分隔符** ：用来分隔程序语言元素的字符或字符的组合。

**求值** ：在程序执行期间，为表达式、功能、网络或功能块的输出确定值的过程。

**直接量** ：直接表示一个值的词法单元。

**保持的数据** ：以某种方式存储，在经过断电/通电序列后，能保持值不变的数据。

**语义** ：编程语言的符号元素之间的关系，它们的含义、解释以及使用。

## 软件模型

在可编程控制器软件模型中， **配置** 是对应于可编程控制器系统的语言元素， **资源** 则对应于信号处理功能及其人机接口、传感器-执行器接口（如果有的话）。

一个 *配置* 包含一个或更多的 *资源* ，每个 *资源* 包含一个或更多的 *程序* 。而程序的运行受零个或更多 *任务* 的控制， *程序* 可能包含零个或更多 *功能块* 或其他语言元素。

![@2x](/assets/img/blog/software-model.png)

## 通信模型

1. 在同一程序内，通过直接将一个程序元素的输出连接到另一个程序元素的输入，完成变量间的通信。
2. 在同一配置中的程序之间，变量的值可以通过全局变量来通信。
3. 使用通信功能块，变量的值可以在同一程序的不同部分之间、同一或不同配置的不同程序之间、可编程控制器程序和非可编程控制器系统之间进行通信。
4. 此外，可编程控制器或非可编程控制器系统间通过 *访问路径* 传输数据。


## 程序设计模型

可编程控制器编程语言元素有如下的分类：

* 数据类型和变量
* 程序组织单元：功能、功能块、程序
* 顺序功能图（SFC）元素
* 配置元素：全局变量、资源、任务、访问路径

这些元素的组合应遵守下列规则：

1. 导出数据类型的声明可以使用标准数据类型（包括基本数据类型和一般数据类型）、先前导出的任何数据类型。
2. 导出功能的声明可以使用标准或导出数据类型、标准功能、先前导出的任何功能。该声明可以使用 IL,ST,LD,FBD 语言。
3. 导出功能块的声明可以使用标准或导出数据类型和功能、标准功能块、先前导出的任何功能块。该声明可以使用 IL,ST,LD,FBD语言和SFC元素。
4. 程序声明可以使用标准或导出数据类型、功能和功能块。该声明可以使用IL,ST,LD,FBD语言和SFC元素。
5. 通过配置元素，可以将程序组合形成配置。

![@2x](/assets/img/blog/programming-model.png)

